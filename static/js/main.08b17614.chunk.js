(this.webpackJsonpfifteen=this.webpackJsonpfifteen||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,r){},function(e,t,r){},,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(10),s=r.n(a),i=r(3),o=1,u=2,l=r(6),d=r(2);function j(e,t){var r=t-e+1;return Math.floor(Math.random()*r+e)}for(var b=[],f=0;f<50;f++)b.push({value:j(1,9),isUsed:!1,id:f});var h={boardNumbers:b,currentPlayer:o,currentSelections:[],loser:"",isGameOver:!1},m=5,O=10,v=11,p=13,x=function(e,t){switch(t.type){case m:var r=e.boardNumbers;return e.currentSelections.forEach((function(e){r.find((function(t){return t.id===e})).isUsed=!0})),Object(d.a)(Object(d.a)({},e),{},{currentSelections:[],currentPlayer:e.currentPlayer===o?u:o,boardNumbers:Object(l.a)(r)});case v:return Object(d.a)(Object(d.a)({},e),{},{currentSelections:[].concat(Object(l.a)(e.currentSelections),[t.toBeAdded])});case p:var n=e.currentSelections;return n.includes(t.toBeRemoved)&&n.splice(n.indexOf(t.toBeRemoved),1),Object(d.a)(Object(d.a)({},e),{},{currentSelections:Object(l.a)(n)});case O:return Object(d.a)(Object(d.a)({},e),{},{isGameOver:!0,loser:e.currentPlayer})}},y=(r(17),r(11)),g=r.n(y),N=(r(18),r(1)),B=function(e){var t=e.number,r=t.value,n=t.id,c=t.isUsed,a=e.currentSelections,s=e.isGameOver,i=e.dispatch,o=e.isBotTurn;return Object(N.jsx)("div",{"data-testid":"number-".concat(n),className:g()({number:!0,selected:a.includes(n),used:c}),onClick:function(){c||o||s||(a.includes(n)?i({type:p,toBeRemoved:n}):a.length<3&&i({type:v,toBeAdded:n}))},children:r})},S=c.a.memo(B),w=function(e){var t=e.boardNumbers,r=e.currentSelections,n=e.dispatch,c=e.isGameOver,a=e.isBotTurn;return Object(N.jsx)("div",{className:"board","data-testid":"board",children:t.map((function(e){return Object(N.jsx)(S,{isGameOver:c,number:e,currentSelections:r,dispatch:n,isBotTurn:a},e.id)}))})},k=r(8),P=r.n(k),A=r(12),E=r(9),G=r.p+"static/media/fifteen.1b19e599.jpeg",T=r.p+"static/media/NDAvatar.9548e391.svg",R=(r(21),{title:"Fifteen",text:"A simple 2 player game.",url:"https://www.niranjanborawake.in/fifteen/"}),C=function(){var e=Object(A.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.share(R);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Error sharing");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),M=function(e){var t=e.startGame,r=e.setPlayingAgainstBot,n=e.playingAgainstBot,c=function(e){r("bot"===e.target.value)};return Object(N.jsxs)("div",{className:"home",children:[Object(N.jsx)("div",{className:"banner",children:Object(N.jsx)("img",{src:G,alt:"15"})}),Object(N.jsxs)("div",{className:"details",children:[Object(N.jsxs)("div",{className:"rules",children:[Object(N.jsx)("p",{children:"Players take it in turns to select 2 or 3 circles that total 15 in 15s."}),Object(N.jsx)("p",{children:"A player could select 2 circles, e.g. 7 and 8 or 3 circles, e.g. 4, 5 and 6."}),Object(N.jsx)("p",{children:"The last player who selects a combination of 15 is the winner."})]}),Object(N.jsxs)("div",{className:"controls",children:[Object(N.jsxs)("div",{className:"opponent",children:[Object(N.jsx)("span",{children:"Play against : "}),Object(N.jsx)("input",{id:"bot",type:"radio",name:"againstBot",value:"bot",checked:n,onChange:c}),Object(N.jsx)("label",{htmlFor:"bot",children:"Bot"}),Object(N.jsx)("input",{id:"friend",type:"radio",name:"againstBot",value:"friend",checked:!n,onChange:c}),Object(N.jsx)("label",{htmlFor:"friend",children:"Friend"})]}),Object(N.jsx)("button",{onClick:t,children:"START"})]}),Object(N.jsxs)("div",{className:"social",children:[Object(N.jsx)("a",{href:"https://twitter.com/niranjandb",className:"built-by",children:Object(N.jsx)("img",{className:"avatar",src:T})}),Object(N.jsxs)("div",{className:"like-and-share",children:[Object(N.jsx)("a",{href:"https://twitter.com/niranjandb",children:Object(N.jsx)(E.a,{className:"icon"})}),Object(N.jsx)(E.b,{className:"icon",onClick:C})]})]})]})]})};var F=function(e,t){var r=Object(n.useRef)();Object(n.useEffect)((function(){r.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){r.current()}),t);return function(){return clearInterval(e)}}}),[t])},U=(r(22),function(e){var t=e.dispatch,r=e.currentPlayer,c=e.testTimer,a=Object(n.useState)(c||15),s=Object(i.a)(a,2),o=s[0],u=s[1];return Object(n.useEffect)((function(){0===o&&t({type:O})}),[t,o]),F((function(){o>0&&u(o-1)}),1e3),Object(N.jsx)("label",{"data-testid":"timer-player-".concat(r),className:"timer player-".concat(r),children:"00:".concat(o<10?"0"+o:o)})}),Y=(r(23),function(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}),I=function(e){var t=e.testBoardNumbers,r=Object(n.useReducer)(x,h),c=Object(i.a)(r,2),a=c[0],s=c[1],l=Object(n.useState)(!0),d=Object(i.a)(l,2),j=d[0],b=d[1],f=Object(n.useState)(!0),O=Object(i.a)(f,2),p=O[0],y=O[1],g=a.boardNumbers,B=a.currentPlayer,S=a.currentSelections,k=a.loser,P=a.isGameOver;return Object(n.useEffect)((function(){(function(e,t){return 15===t.filter((function(t){var r=t.id;return e.includes(r)})).map((function(e){return e.value})).reduce((function(e,t){return e+t}),0)})(S,g)&&s({type:m})}),[S,g]),Object(n.useEffect)((function(){B===u&&p&&function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,r=[],n=Y(e.filter((function(e){return!e.isUsed}))),c=n.length,a=0;a<c-2;a++)for(var s=a+1;s<c-1;s++)for(var i=s+1;i<c;i++)if(n[a].value+n[s].value+n[i].value==t)return r.push(n[a]),r.push(n[s]),r.push(n[i]),r;for(var o=0;o<c-1;o++)for(var u=o+1;u<c-0;u++)if(n[o].value+n[u].value===t)return r.push(n[o]),r.push(n[u]),r;return r}(g).forEach((function(e,t){var r=e.id;setTimeout((function(){s({type:v,toBeAdded:r})}),2e3*(t+1))}))}),[B,p,g]),j?Object(N.jsx)(M,{startGame:function(){return b(!1)},setPlayingAgainstBot:y,playingAgainstBot:p}):Object(N.jsxs)("div",{className:"fifteen player-".concat(B),children:[Object(N.jsxs)("div",{className:"result-and-timer",children:[P&&Object(N.jsx)("div",{"data-testid":"game-result-player-2",className:"player-2",children:k===u?"You Lost":"You Won"}),B===o&&!P&&Object(N.jsx)(U,{currentPlayer:B,dispatch:s})]}),Object(N.jsx)(w,{isGameOver:P,dispatch:s,currentSelections:S,boardNumbers:t||g,isBotTurn:!(!p||B!==u)}),Object(N.jsxs)("div",{className:"result-and-timer",children:[P&&Object(N.jsx)("div",{"data-testid":"game-result-player-1",className:"player-1",children:k===o?"You Lost":"You Won"}),B===u&&!P&&Object(N.jsx)(U,{currentPlayer:B,dispatch:s})]})]})};r(24);s.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(I,{})}),document.getElementById("root"))}],[[25,1,2]]]);
//# sourceMappingURL=main.08b17614.chunk.js.map