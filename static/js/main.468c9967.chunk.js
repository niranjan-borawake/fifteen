(this.webpackJsonpfifteen=this.webpackJsonpfifteen||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,r){},function(e,t,r){},,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var c=r(1),n=r.n(c),a=r(8),s=r.n(a),i=r(4),u=1,o=2,l=r(6),d=r(2);function b(e,t){var r=t-e+1;return Math.floor(Math.random()*r+e)}for(var j=[],f=0;f<50;f++)j.push({value:b(1,9),isUsed:!1,id:f});var O={boardNumbers:j,currentPlayer:u,currentSelections:[],loser:"",isGameOver:!1},m=5,v=10,h=11,p=13,x=function(e,t){switch(t.type){case m:var r=e.boardNumbers;return e.currentSelections.forEach((function(e){r.find((function(t){return t.id===e})).isUsed=!0})),Object(d.a)(Object(d.a)({},e),{},{currentSelections:[],currentPlayer:e.currentPlayer===u?o:u,boardNumbers:Object(l.a)(r)});case h:return Object(d.a)(Object(d.a)({},e),{},{currentSelections:[].concat(Object(l.a)(e.currentSelections),[t.toBeAdded])});case p:var c=e.currentSelections;return c.includes(t.toBeRemoved)&&c.splice(c.indexOf(t.toBeRemoved),1),Object(d.a)(Object(d.a)({},e),{},{currentSelections:Object(l.a)(c)});case v:return Object(d.a)(Object(d.a)({},e),{},{isGameOver:!0,loser:e.currentPlayer})}},y=(r(14),r(9)),N=r.n(y),S=(r(15),r(0)),G=function(e){var t=e.number,r=t.value,c=t.id,n=t.isUsed,a=e.currentSelections,s=e.isGameOver,i=e.dispatch;return Object(S.jsx)("div",{"data-testid":"number-".concat(c),className:N()({number:!0,selected:a.includes(c),used:n}),onClick:function(){n||s||(a.includes(c)?i({type:p,toBeRemoved:c}):a.length<3&&i({type:h,toBeAdded:c}))},children:r})},P=n.a.memo(G),g=function(e){var t=e.boardNumbers,r=e.currentSelections,c=e.dispatch,n=e.isGameOver;return Object(S.jsx)("div",{className:"board","data-testid":"board",children:t.map((function(e){return Object(S.jsx)(P,{isGameOver:n,number:e,currentSelections:r,dispatch:c},e.id)}))})},B=r.p+"static/media/fifteen.1b19e599.jpeg",E=(r(17),function(e){var t=e.startGame;return Object(S.jsxs)("div",{className:"home",children:[Object(S.jsx)("div",{className:"banner",children:Object(S.jsx)("img",{src:B,alt:"15"})}),Object(S.jsxs)("div",{className:"rules",children:[Object(S.jsx)("p",{children:"Players take it in turns to select 2 or 3 circles that total 15 in 15s."}),Object(S.jsx)("p",{children:"A player could select 2 circles, e.g. 7 and 8 or 3 circles, e.g. 4, 5 and 6."}),Object(S.jsx)("p",{children:"The last player who selects a combination of 15 is the winner."}),Object(S.jsx)("button",{onClick:t,children:"START"})]})]})});var R=function(e,t){var r=Object(c.useRef)();Object(c.useEffect)((function(){r.current=e}),[e]),Object(c.useEffect)((function(){if(null!==t){var e=setInterval((function(){r.current()}),t);return function(){return clearInterval(e)}}}),[t])},k=(r(18),function(e){var t=e.dispatch,r=e.currentPlayer,n=e.testTimer,a=Object(c.useState)(n||15),s=Object(i.a)(a,2),u=s[0],o=s[1];return Object(c.useEffect)((function(){0===u&&t({type:v})}),[t,u]),R((function(){u>0&&o(u-1)}),1e3),Object(S.jsx)("label",{"data-testid":"timer-player-".concat(r),className:"timer player-".concat(r),children:"00:".concat(u<10?"0"+u:u)})}),w=(r(19),function(e){var t=e.testBoardNumbers,r=Object(c.useReducer)(x,O),n=Object(i.a)(r,2),a=n[0],s=n[1],l=Object(c.useState)(!0),d=Object(i.a)(l,2),b=d[0],j=d[1],f=a.boardNumbers,v=a.currentPlayer,h=a.currentSelections,p=a.loser,y=a.isGameOver;return Object(c.useEffect)((function(){(function(e,t){return 15===t.filter((function(t){var r=t.id;return e.includes(r)})).map((function(e){return e.value})).reduce((function(e,t){return e+t}),0)})(h,f)&&s({type:m})}),[h,f]),b?Object(S.jsx)(E,{startGame:function(){return j(!1)}}):Object(S.jsxs)("div",{className:"fifteen player-".concat(v),children:[Object(S.jsxs)("div",{className:"result-and-timer",children:[y&&Object(S.jsx)("div",{"data-testid":"game-result-player-2",className:"player-2",children:p===o?"You Lost":"You Won"}),v===u&&!y&&Object(S.jsx)(k,{currentPlayer:v,dispatch:s})]}),Object(S.jsx)(g,{isGameOver:y,dispatch:s,currentSelections:h,boardNumbers:t||f}),Object(S.jsxs)("div",{className:"result-and-timer",children:[y&&Object(S.jsx)("div",{"data-testid":"game-result-player-1",className:"player-1",children:p===u?"You Lost":"You Won"}),v===o&&!y&&Object(S.jsx)(k,{currentPlayer:v,dispatch:s})]})]})});r(20);s.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(w,{})}),document.getElementById("root"))}],[[21,1,2]]]);
//# sourceMappingURL=main.468c9967.chunk.js.map