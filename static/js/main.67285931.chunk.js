(this.webpackJsonpfifteen=this.webpackJsonpfifteen||[]).push([[0],[,,function(e,t,n){"use strict";n.r(t),n.d(t,"FIFTEEN",(function(){return r})),n.d(t,"PLAYERS",(function(){return c}));var r=15,c={ONE:1,TWO:2}},,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(12),s=n.n(a),i=n(5),o=n(4),l=n(2),u=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e},d=n(9),j=n(3);function b(e,t){var n=t-e+1;return Math.floor(Math.random()*n+e)}var f=function(){for(var e=[],t=0;t<50;t++)e.push({value:b(1,9),isUsed:!1,id:t});return e},h=function(){return{boardNumbers:f(),currentPlayer:l.PLAYERS.ONE,currentSelections:[],loser:"",isGameOver:!1}},m=1,O=2,v=3,p=4,x=5,N=function(e,t){switch(t.type){case x:return Object(j.a)({},h());case m:var n=e.boardNumbers;return e.currentSelections.forEach((function(e){n.find((function(t){return t.id===e})).isUsed=!0})),Object(j.a)(Object(j.a)({},e),{},{currentSelections:[],currentPlayer:e.currentPlayer===l.PLAYERS.ONE?l.PLAYERS.TWO:l.PLAYERS.ONE,boardNumbers:Object(d.a)(n)});case v:return Object(j.a)(Object(j.a)({},e),{},{currentSelections:[].concat(Object(d.a)(e.currentSelections),[t.toBeAdded])});case p:var r=e.currentSelections;return r.includes(t.toBeRemoved)&&r.splice(r.indexOf(t.toBeRemoved),1),Object(j.a)(Object(j.a)({},e),{},{currentSelections:Object(d.a)(r)});case O:return Object(j.a)(Object(j.a)({},e),{},{isGameOver:!0,loser:e.currentPlayer})}},y=(n(18),n(8)),g=n.n(y),E=(n(19),n(1)),S=function(e){var t=e.number,n=t.value,r=t.id,c=t.isUsed,a=e.currentSelections,s=e.isGameOver,i=e.dispatch,o=e.isBotTurn;return Object(E.jsx)("div",{"data-testid":"number-".concat(r),className:g()({number:!0,selected:a.includes(r),used:c}),onClick:function(){c||o||s||(a.includes(r)?i({type:p,toBeRemoved:r}):a.length<3&&i({type:v,toBeAdded:r}))},children:n})},P=c.a.memo(S),A=function(e){var t=e.boardNumbers,n=e.currentSelections,r=e.dispatch,c=e.isGameOver,a=e.isBotTurn;return Object(E.jsx)("div",{className:"board","data-testid":"board",children:t.map((function(e){return Object(E.jsx)(P,{isGameOver:c,number:e,currentSelections:n,dispatch:r,isBotTurn:a},e.id)}))})},w=n(11),T=n.n(w),B=n(13),M=n.p+"static/media/fifteen.1b19e599.jpeg",R=n.p+"static/media/NDAvatar.9548e391.svg",k=(n(22),{title:"Fifteen",text:"A simple 2 player game.",url:"https://www.niranjanborawake.in/fifteen/"}),F=function(){var e=Object(B.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.share(k);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Error sharing");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),L=function(e){var t=e.startGame,n=e.setPlayingAgainstBot,r=e.playingAgainstBot,c=function(e){n("bot"===e.target.value)};return Object(E.jsxs)("div",{className:"home",children:[Object(E.jsx)("div",{className:"banner",children:Object(E.jsx)("img",{src:M,alt:"15"})}),Object(E.jsxs)("div",{className:"details",children:[Object(E.jsxs)("div",{className:"rules",children:[Object(E.jsx)("p",{children:"Players take it in turns to select 2 or 3 circles that total 15 in 15s."}),Object(E.jsx)("p",{children:"A player could select 2 circles, e.g. 7 and 8 or 3 circles, e.g. 4, 5 and 6."}),Object(E.jsx)("p",{children:"The last player who selects a combination of 15 is the winner."})]}),Object(E.jsxs)("div",{className:"controls",children:[Object(E.jsxs)("div",{className:"opponent",children:[Object(E.jsx)("span",{children:"Play against : "}),Object(E.jsx)("input",{id:"bot",type:"radio",name:"againstBot",value:"bot",checked:r,onChange:c}),Object(E.jsx)("label",{htmlFor:"bot",children:"Bot"}),Object(E.jsx)("input",{id:"friend",type:"radio",name:"againstBot",value:"friend",checked:!r,onChange:c}),Object(E.jsx)("label",{htmlFor:"friend",children:"Friend"})]}),Object(E.jsx)("button",{onClick:t,children:"START"})]}),Object(E.jsxs)("div",{className:"social",children:[Object(E.jsx)("a",{href:"https://twitter.com/niranjandb",className:"built-by",children:Object(E.jsx)("img",{className:"avatar",src:R})}),Object(E.jsxs)("div",{className:"like-and-share",children:[Object(E.jsx)("a",{href:"https://twitter.com/niranjandb",children:Object(E.jsx)(o.a,{className:"icon"})}),Object(E.jsx)(o.d,{className:"icon",onClick:F})]})]})]})]})};var Y=function(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])},G=(n(23),function(e){var t=e.dispatch,n=e.currentPlayer,c=e.testTimer,a=Object(r.useState)(c||l.FIFTEEN),s=Object(i.a)(a,2),o=s[0],u=s[1];return Object(r.useEffect)((function(){0===o&&t({type:O})}),[t,o]),Y((function(){o>0&&u(o-1)}),1e3),Object(E.jsx)("label",{"data-testid":"timer-player-".concat(n),className:"timer player-".concat(n),children:o})}),C=(n(24),n(2).FIFTEEN),I=function(){return Object(E.jsx)("div",{className:"winner",children:Object(E.jsx)("div",{children:Object(E.jsx)("div",{className:"jump",children:C})})})},W=(n(25),n(26),function(){var e=function(){for(var e=[],t=0;t<100;t++){var n=Math.floor(360*Math.random()),r=Math.floor(Math.random()*Math.max(document.documentElement.clientWidth,window.innerWidth||0)),c=Math.floor(Math.random()*Math.max(document.documentElement.clientHeight,window.innerHeight||500)),a=Math.floor(15*Math.random()),s=["#8d6e63","#795548","#6d4c41","#5d4037","#4e342e","#3e2723"],i=s[Math.floor(Math.random()*s.length)],o={};o.top=c+"px",o.right=r+"px",o.backgroundColor=i,o.transform="skew(15deg) rotate("+n+"deg)",o.animationDelay=a+"s",e.push(o)}return e}();return Object(E.jsx)("div",{className:"confetti-wrapper",children:e.map((function(e,t){return Object(E.jsx)("div",{className:"confetti",style:e},t)}))})}),U=function(e){var t=e.testBoardNumbers,n=Object(r.useReducer)(N,h()),c=Object(i.a)(n,2),a=c[0],s=c[1],d=Object(r.useState)(!0),j=Object(i.a)(d,2),b=j[0],f=j[1],O=Object(r.useState)(!0),p=Object(i.a)(O,2),y=p[0],S=p[1],P=a.boardNumbers,w=a.currentPlayer,T=a.currentSelections,B=a.loser,M=a.isGameOver;return Object(r.useEffect)((function(){(function(e,t){return t.filter((function(t){var n=t.id;return e.includes(n)})).map((function(e){return e.value})).reduce((function(e,t){return e+t}),0)===l.FIFTEEN})(T,P)&&s({type:m})}),[T,P]),Object(r.useEffect)((function(){w===l.PLAYERS.TWO&&y&&function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.FIFTEEN,n=[],r=u(e.filter((function(e){return!e.isUsed}))),c=r.length,a=0;a<c-2;a++)for(var s=a+1;s<c-1;s++)for(var i=s+1;i<c;i++)if(r[a].value+r[s].value+r[i].value==t)return n.push(r[a]),n.push(r[s]),n.push(r[i]),n;for(var o=0;o<c-1;o++)for(var d=o+1;d<c-0;d++)if(r[o].value+r[d].value===t)return n.push(r[o]),n.push(r[d]),n;return n}(P).forEach((function(e,t){var n=e.id;setTimeout((function(){s({type:v,toBeAdded:n})}),2e3*(t+1))}))}),[w,y,P]),b?Object(E.jsx)(L,{startGame:function(){return f(!1)},setPlayingAgainstBot:S,playingAgainstBot:y}):Object(E.jsxs)("div",{className:"fifteen player-".concat(w),children:[M&&Object(E.jsx)(W,{}),Object(E.jsxs)("div",{className:"result-and-timer",children:[M&&Object(E.jsx)("div",{"data-testid":"game-result-player-2",className:"player-2",children:B===l.PLAYERS.TWO?"0":Object(E.jsx)(I,{})}),!M&&(w===l.PLAYERS.TWO?Object(E.jsx)(G,{currentPlayer:w,dispatch:s}):Object(E.jsx)("label",{className:"player-2",children:"15"}))]}),Object(E.jsx)(A,{isGameOver:M,dispatch:s,currentSelections:T,boardNumbers:t||P,isBotTurn:!(!y||w!==l.PLAYERS.TWO)}),Object(E.jsxs)("div",{className:g()({"result-and-timer":!0,"game-over":M}),children:[M&&Object(E.jsx)(o.b,{className:"icon",onClick:function(){s({type:x}),f(!0)}}),M&&Object(E.jsx)("div",{"data-testid":"game-result-player-1",className:"player-1",children:B===l.PLAYERS.ONE?"0":Object(E.jsx)(I,{})}),!M&&(w===l.PLAYERS.ONE?Object(E.jsx)(G,{currentPlayer:w,dispatch:s}):Object(E.jsx)("label",{className:"player-1",children:"15"})),M&&Object(E.jsx)(o.c,{className:"icon",onClick:function(){s({type:x})}})]})]})};n(27);s.a.render(Object(E.jsx)(c.a.StrictMode,{children:Object(E.jsx)(U,{})}),document.getElementById("root"))}],[[28,1,2]]]);
//# sourceMappingURL=main.67285931.chunk.js.map