(this.webpackJsonpfifteen=this.webpackJsonpfifteen||[]).push([[0],[,,function(e,t,n){"use strict";n.r(t),n.d(t,"FIFTEEN",(function(){return r})),n.d(t,"PLAYERS",(function(){return c}));var r=15,c={ONE:1,TWO:2}},,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(12),i=n.n(a),s=n(5),o=n(4),l=n(2),u=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e},d=n(9),f=n(3);function j(e,t){var n=t-e+1;return Math.floor(Math.random()*n+e)}var b=function(){for(var e=[],t=0;t<50;t++)e.push({value:j(1,9),isUsed:!1,id:t});return e},h=function(){return{boardNumbers:b(),currentPlayer:l.PLAYERS.ONE,currentSelections:[],loser:"",isGameOver:!1}},m=1,v=2,O=3,p=4,g=5,x=function(e,t){switch(t.type){case g:return Object(f.a)({},h());case m:var n=e.boardNumbers;return e.currentSelections.forEach((function(e){n.find((function(t){return t.id===e})).isUsed=!0})),Object(f.a)(Object(f.a)({},e),{},{currentSelections:[],currentPlayer:e.currentPlayer===l.PLAYERS.ONE?l.PLAYERS.TWO:l.PLAYERS.ONE,boardNumbers:Object(d.a)(n)});case O:return Object(f.a)(Object(f.a)({},e),{},{currentSelections:[].concat(Object(d.a)(e.currentSelections),[t.toBeAdded])});case p:var r=e.currentSelections;return r.includes(t.toBeRemoved)&&r.splice(r.indexOf(t.toBeRemoved),1),Object(f.a)(Object(f.a)({},e),{},{currentSelections:Object(d.a)(r)});case v:return Object(f.a)(Object(f.a)({},e),{},{isGameOver:!0,loser:e.currentPlayer})}},N=(n(18),n(8)),y=n.n(N),w=(n(19),n(1)),E=function(e){var t=e.number,n=t.value,r=t.id,c=t.isUsed,a=e.currentSelections,i=e.isGameOver,s=e.dispatch,o=e.isBotTurn;return Object(w.jsx)("div",{"data-testid":"number-".concat(r),className:y()({number:!0,selected:a.includes(r),used:c}),onClick:function(){c||o||i||(a.includes(r)?s({type:p,toBeRemoved:r}):a.length<3&&s({type:O,toBeAdded:r}))},children:n})},S=c.a.memo(E),k=function(e){var t=e.boardNumbers,n=e.currentSelections,r=e.dispatch,c=e.isGameOver,a=e.isBotTurn;return Object(w.jsx)("div",{className:"board","data-testid":"board",children:t.map((function(e){return Object(w.jsx)(S,{isGameOver:c,number:e,currentSelections:n,dispatch:r,isBotTurn:a},e.id)}))})},A=n(11),P=n.n(A),T=n(13),B=n.p+"static/media/fifteen.1b19e599.jpeg",R=n.p+"static/media/NDAvatar.9548e391.svg",M=(n(22),{title:"Fifteen",text:"A simple 2 player game.",url:"https://www.niranjanborawake.in/fifteen/"}),W=function(){var e=Object(T.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.share(M);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Error sharing");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),F=function(e){var t=e.startGame,n=e.setPlayingAgainstBot,r=e.playingAgainstBot,c=function(e){n("bot"===e.target.value)};return Object(w.jsxs)("div",{className:"home",children:[Object(w.jsx)("div",{className:"banner",children:Object(w.jsx)("img",{src:B,alt:"15"})}),Object(w.jsxs)("div",{className:"details",children:[Object(w.jsxs)("div",{className:"rules",children:[Object(w.jsx)("p",{children:"Players take it in turns to select 2 or 3 circles that total 15 in 15s."}),Object(w.jsx)("p",{children:"A player could select 2 circles, e.g. 7 and 8 or 3 circles, e.g. 4, 5 and 6."}),Object(w.jsx)("p",{children:"The last player who selects a combination of 15 is the winner."})]}),Object(w.jsxs)("div",{className:"controls",children:[Object(w.jsxs)("div",{className:"opponent",children:[Object(w.jsx)("span",{children:"Play against : "}),Object(w.jsx)("input",{id:"bot",type:"radio",name:"againstBot",value:"bot",checked:r,onChange:c}),Object(w.jsx)("label",{htmlFor:"bot",children:"Bot"}),Object(w.jsx)("input",{id:"friend",type:"radio",name:"againstBot",value:"friend",checked:!r,onChange:c}),Object(w.jsx)("label",{htmlFor:"friend",children:"Friend"})]}),Object(w.jsx)("button",{onClick:t,children:"START"})]}),Object(w.jsxs)("div",{className:"social",children:[Object(w.jsx)("a",{href:"https://twitter.com/niranjandb",className:"built-by",children:Object(w.jsx)("img",{className:"avatar",src:R})}),Object(w.jsxs)("div",{className:"like-and-share",children:[Object(w.jsx)("a",{href:"https://twitter.com/niranjandb/status/1390756922987454466?s=20",children:Object(w.jsx)(o.a,{className:"icon"})}),Object(w.jsx)(o.d,{className:"icon",onClick:W})]})]})]})]})};var L=function(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])},Y=(n(23),function(e){var t=e.dispatch,n=e.currentPlayer,c=e.testTimer,a=Object(r.useState)(c||l.FIFTEEN),i=Object(s.a)(a,2),o=i[0],u=i[1];return Object(r.useEffect)((function(){0===o&&t({type:v})}),[t,o]),L((function(){o>0&&u(o-1)}),1e3),Object(w.jsx)("label",{"data-testid":"timer-player-".concat(n),className:"timer player-".concat(n),children:o})}),C=(n(24),n(2).FIFTEEN),G=function(){return Object(w.jsx)("div",{className:"winner",children:Object(w.jsx)("div",{children:Object(w.jsx)("div",{className:"jump",children:C})})})},I=(n(25),n(26),function(){var e=function(){for(var e=[],t=0;t<100;t++){var n=Math.floor(360*Math.random()),r=Math.floor(Math.random()*Math.max(document.documentElement.clientWidth,window.innerWidth||0)),c=Math.floor(Math.random()*Math.max(document.documentElement.clientHeight,window.innerHeight||500)),a=Math.floor(15*Math.random()),i=["#8d6e63","#795548","#6d4c41","#5d4037","#4e342e","#3e2723"],s=i[Math.floor(Math.random()*i.length)],o={};o.top=c+"px",o.right=r+"px",o.backgroundColor=s,o.transform="skew(15deg) rotate("+n+"deg)",o.animationDelay=a+"s",e.push(o)}return e}();return Object(w.jsx)("div",{className:"confetti-wrapper",children:e.map((function(e,t){return Object(w.jsx)("div",{className:"confetti",style:e},t)}))})}),U=function(e){var t=e.testBoardNumbers,n=Object(r.useReducer)(x,h()),c=Object(s.a)(n,2),a=c[0],i=c[1],d=Object(r.useState)(!0),f=Object(s.a)(d,2),j=f[0],b=f[1],v=Object(r.useState)(!0),p=Object(s.a)(v,2),N=p[0],E=p[1],S=a.boardNumbers,A=a.currentPlayer,P=a.currentSelections,T=a.loser,B=a.isGameOver;return Object(r.useEffect)((function(){(function(e,t){return t.filter((function(t){var n=t.id;return e.includes(n)})).map((function(e){return e.value})).reduce((function(e,t){return e+t}),0)===l.FIFTEEN})(P,S)&&i({type:m})}),[P,S]),Object(r.useEffect)((function(){A===l.PLAYERS.TWO&&N&&function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.FIFTEEN,n=[],r=u(e.filter((function(e){return!e.isUsed}))),c=r.length,a=0;a<c-2;a++)for(var i=a+1;i<c-1;i++)for(var s=i+1;s<c;s++)if(r[a].value+r[i].value+r[s].value==t)return n.push(r[a]),n.push(r[i]),n.push(r[s]),n;for(var o=0;o<c-1;o++)for(var d=o+1;d<c-0;d++)if(r[o].value+r[d].value===t)return n.push(r[o]),n.push(r[d]),n;return n}(S).forEach((function(e,t){var n=e.id;setTimeout((function(){i({type:O,toBeAdded:n})}),2e3*(t+1))}))}),[A,N,S]),j?Object(w.jsx)(F,{startGame:function(){return b(!1)},setPlayingAgainstBot:E,playingAgainstBot:N}):Object(w.jsxs)("div",{className:"fifteen player-".concat(A),children:[B&&Object(w.jsx)(I,{}),Object(w.jsxs)("div",{className:"result-and-timer",children:[B&&Object(w.jsx)("div",{"data-testid":"game-result-player-2",className:"player-2",children:T===l.PLAYERS.TWO?"0":Object(w.jsx)(G,{})}),!B&&(A===l.PLAYERS.TWO?Object(w.jsx)(Y,{currentPlayer:A,dispatch:i}):Object(w.jsx)("label",{className:"player-2",children:"15"}))]}),Object(w.jsx)(k,{isGameOver:B,dispatch:i,currentSelections:P,boardNumbers:t||S,isBotTurn:!(!N||A!==l.PLAYERS.TWO)}),Object(w.jsxs)("div",{className:y()({"result-and-timer":!0,"game-over":B}),children:[B&&Object(w.jsx)(o.b,{className:"icon",onClick:function(){i({type:g}),b(!0)}}),B&&Object(w.jsx)("div",{"data-testid":"game-result-player-1",className:"player-1",children:T===l.PLAYERS.ONE?"0":Object(w.jsx)(G,{})}),!B&&(A===l.PLAYERS.ONE?Object(w.jsx)(Y,{currentPlayer:A,dispatch:i}):Object(w.jsx)("label",{className:"player-1",children:"15"})),B&&Object(w.jsx)(o.c,{className:"icon",onClick:function(){i({type:g})}})]})]})},D=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function H(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(27);i.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(U,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/fifteen",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/fifteen","/service-worker.js");D?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):H(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):H(t,e)}))}}()}],[[28,1,2]]]);
//# sourceMappingURL=main.ece1aff2.chunk.js.map